<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë¯¸ë˜ ì˜ë£Œ AI ì—°êµ¬ì†Œ: ì„¸í¬ ë¶„ì„ í›ˆë ¨</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;500;700&family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-dark: #0f172a;
            --panel-bg: rgba(30, 41, 59, 0.7);
            --border: rgba(56, 189, 248, 0.3);
            --primary: #38bdf8; /* Blue (Normal) */
            --danger: #ef4444;  /* Red (Virus) */
            --accent: #22d3ee;  /* Neon Cyan */
            --text-main: #f1f5f9;
            --text-sub: #94a3b8;
        }

        * { box-sizing: border-box; }

        body {
            margin: 0;
            padding: 0;
            width: 100vw;
            height: 100vh;
            background-color: var(--bg-dark);
            background-image: 
                radial-gradient(circle at 50% 50%, rgba(15, 23, 42, 0) 0%, rgba(15, 23, 42, 1) 100%),
                linear-gradient(rgba(30, 41, 59, 0.5) 1px, transparent 1px),
                linear-gradient(90deg, rgba(30, 41, 59, 0.5) 1px, transparent 1px);
            background-size: 100% 100%, 40px 40px, 40px 40px;
            color: var(--text-main);
            font-family: 'Noto Sans KR', sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
        }

        /* 16:9 ë¹„ìœ¨ ìœ ì§€ ì»¨í…Œì´ë„ˆ */
        #dashboard {
            width: 95vw;
            max-width: 1600px;
            aspect-ratio: 16 / 9;
            background: var(--panel-bg);
            border: 1px solid var(--border);
            border-radius: 15px;
            box-shadow: 0 0 50px rgba(56, 189, 248, 0.1);
            display: grid;
            grid-template-rows: 70px 1fr 100px; /* í—¤ë”, ë©”ì¸, í‘¸í„° */
            padding: 20px;
            position: relative;
            backdrop-filter: blur(10px);
        }

        /* --- 1. í—¤ë” --- */
        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid var(--border);
            padding-bottom: 15px;
        }
        .logo { font-family: 'Orbitron'; font-size: 1.8rem; color: var(--accent); display: flex; align-items: center; gap: 10px; }
        .stats { display: flex; gap: 30px; font-family: 'Orbitron'; font-size: 1.2rem; }
        .stat-item span { color: var(--primary); font-weight: bold; }
        .level-badge { background: var(--accent); color: #000; padding: 5px 15px; border-radius: 4px; font-weight: bold; font-size: 1rem; }

        /* --- 2. ë©”ì¸ ì˜ì—­ (3ë‹¨ ë¶„í• ) --- */
        main {
            display: grid;
            grid-template-columns: 1fr 1.2fr 1fr; /* í˜„ë¯¸ê²½ - AIë¶„ì„ - ë°ì´í„°ë¡œê·¸ */
            gap: 20px;
            padding: 20px 0;
            overflow: hidden;
        }

        /* íŒ¨ë„ ê³µí†µ ìŠ¤íƒ€ì¼ */
        .panel {
            background: rgba(15, 23, 42, 0.5);
            border: 1px solid var(--border);
            border-radius: 10px;
            padding: 15px;
            display: flex;
            flex-direction: column;
            position: relative;
        }
        .panel-title { font-family: 'Orbitron'; color: var(--text-sub); margin-bottom: 15px; font-size: 1rem; border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 5px; }

        /* [ì™¼ìª½] í˜„ë¯¸ê²½ ë·° */
        .microscope-view {
            flex: 1;
            background: #000;
            border-radius: 50%; /* ì›í˜• ë·° */
            border: 4px solid #334155;
            position: relative;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: inset 0 0 50px #000;
            margin: auto;
            width: 300px; height: 300px;
        }
        .crosshair {
            position: absolute; width: 100%; height: 100%;
            background: 
                linear-gradient(#0f0 1px, transparent 1px) center/20px 100% no-repeat,
                linear-gradient(90deg, #0f0 1px, transparent 1px) center/100% 20px no-repeat;
            opacity: 0.3; pointer-events: none;
        }
        
        /* ì„¸í¬ ìŠ¤íƒ€ì¼ (CSSë¡œ ê·¸ë¦¼) */
        .cell {
            width: 120px; height: 120px;
            transition: all 0.5s;
            position: relative;
            display: flex; justify-content: center; align-items: center;
        }
        .cell-core { width: 40px; height: 40px; border-radius: 50%; filter: blur(2px); }
        
        /* ì •ìƒ ì„¸í¬: ë‘¥ê¸€ê³  íŒŒë€ìƒ‰, ëŠë¦° ì›€ì§ì„ */
        .cell.normal {
            background: rgba(56, 189, 248, 0.3);
            border-radius: 50%;
            border: 2px solid var(--primary);
            box-shadow: 0 0 20px var(--primary);
            animation: float 4s infinite ease-in-out;
        }
        .cell.normal .cell-core { background: #bae6fd; }

        /* ë°”ì´ëŸ¬ìŠ¤: ë¾°ì¡±í•˜ê³  ë¹¨ê°„ìƒ‰, ë–¨ë¦¼ */
        .cell.virus {
            background: rgba(239, 68, 68, 0.3);
            clip-path: polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%);
            border: none;
            animation: shake 0.2s infinite;
        }
        .cell.virus .cell-core { background: #fca5a5; width: 30px; height: 30px; }

        /* [ì¤‘ì•™] AI ë¶„ì„ ì„¼í„° */
        .analysis-screen {
            display: flex; flex-direction: column; gap: 10px;
        }
        .feature-row {
            display: flex; justify-content: space-between; align-items: center;
            background: rgba(255,255,255,0.05); padding: 10px; border-radius: 5px;
        }
        .feature-name { color: var(--text-sub); font-size: 0.9rem; }
        .feature-val { font-family: 'Orbitron'; color: var(--accent); }
        
        .ai-prediction {
            margin-top: auto;
            text-align: center;
            padding: 20px;
            background: rgba(0,0,0,0.3);
            border-radius: 10px;
            border: 1px solid var(--accent);
        }
        .confidence-bar {
            width: 100%; height: 10px; background: #333; margin: 10px 0; border-radius: 5px; overflow: hidden;
        }
        .confidence-fill {
            height: 100%; width: 0%; transition: width 1s;
        }

        /* [ì˜¤ë¥¸ìª½] ë°ì´í„° ë¡œê·¸ */
        .log-list {
            font-family: 'Courier New', monospace;
            font-size: 0.85rem;
            color: #10b981;
            overflow-y: auto;
            height: 100%;
            display: flex; flex-direction: column; gap: 5px;
        }
        .log-item { border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 2px; }

        /* --- 3. í‘¸í„° (ì»¨íŠ¸ë¡¤) --- */
        footer {
            display: flex; justify-content: center; gap: 20px; align-items: center;
        }
        .btn {
            background: transparent;
            border: 2px solid;
            padding: 15px 40px;
            font-size: 1.2rem;
            font-family: 'Orbitron';
            color: white;
            cursor: pointer;
            border-radius: 5px;
            transition: all 0.2s;
            text-transform: uppercase;
            width: 250px;
        }
        .btn-normal { border-color: var(--primary); color: var(--primary); }
        .btn-normal:hover { background: var(--primary); color: #000; box-shadow: 0 0 20px var(--primary); }
        
        .btn-virus { border-color: var(--danger); color: var(--danger); }
        .btn-virus:hover { background: var(--danger); color: #000; box-shadow: 0 0 20px var(--danger); }

        /* ì• ë‹ˆë©”ì´ì…˜ ì •ì˜ */
        @keyframes float { 0%, 100% { transform: translate(0,0); } 50% { transform: translate(5px, -10px); } }
        @keyframes shake { 0% { transform: translate(1px, 1px) rotate(0deg); } 20% { transform: translate(-1px, -2px) rotate(-1deg); } 40% { transform: translate(-3px, 0px) rotate(1deg); } 100% { transform: translate(1px, -1px) rotate(0deg); } }

        /* ëª¨ë‹¬ ì˜¤ë²„ë ˆì´ */
        .overlay {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(15, 23, 42, 0.95);
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            z-index: 100;
        }
        .overlay h1 { font-family: 'Orbitron'; font-size: 3rem; color: var(--accent); margin-bottom: 20px; text-shadow: 0 0 20px var(--accent); }
        .overlay p { max-width: 600px; text-align: center; line-height: 1.6; margin-bottom: 40px; color: #cbd5e1; }
        .start-btn {
            background: var(--accent); border: none; padding: 15px 50px; font-size: 1.5rem; font-weight: bold; cursor: pointer;
            box-shadow: 0 0 30px var(--accent); transition: transform 0.2s;
        }
        .start-btn:hover { transform: scale(1.1); }

    </style>
</head>
<body>

<div id="dashboard">
    <header>
        <div class="logo">
            <span style="font-size: 2rem;">ğŸ§¬</span> MEDI-AI LAB
            <span class="level-badge">LV.<span id="level">1</span></span>
        </div>
        <div class="stats">
            <div class="stat-item">ACCURACY: <span id="accuracy">0</span>%</div>
            <div class="stat-item" style="margin-left:20px;">DATASETS: <span id="score">0</span></div>
        </div>
    </header>

    <main>
        <div class="panel">
            <div class="panel-title">MICROSCOPE FEED [LIVE]</div>
            <div class="microscope-view">
                <div class="crosshair"></div>
                <div id="cell-container">
                    </div>
            </div>
            <div style="margin-top:10px; font-size:0.8rem; text-align:center; color:#64748b;">
                ë°°ìœ¨: x4000 | í•„í„°: UV
            </div>
        </div>

        <div class="panel">
            <div class="panel-title">AI FEATURE EXTRACTION</div>
            <div class="analysis-screen">
                <div class="feature-row">
                    <span class="feature-name">í‘œë©´ í˜•íƒœ (Surface)</span>
                    <span class="feature-val" id="feat-shape">ANALYZING...</span>
                </div>
                <div class="feature-row">
                    <span class="feature-name">ì„¸í¬ì§ˆ ìƒ‰ìƒ (Color)</span>
                    <span class="feature-val" id="feat-color">ANALYZING...</span>
                </div>
                <div class="feature-row">
                    <span class="feature-name">ìš´ë™ì„± (Motility)</span>
                    <span class="feature-val" id="feat-move">ANALYZING...</span>
                </div>

                <div class="ai-prediction">
                    <div style="font-size: 0.9rem; color:#94a3b8;">AI PREDICTION MODEL</div>
                    <div id="ai-result-text" style="font-size: 1.5rem; font-weight:bold; margin: 10px 0;">Wait...</div>
                    <div class="confidence-bar">
                        <div class="confidence-fill" id="conf-bar-fill"></div>
                    </div>
                    <div style="font-size: 0.8rem;">ì‹ ë¢°ë„: <span id="conf-val">0</span>%</div>
                </div>
            </div>
        </div>

        <div class="panel">
            <div class="panel-title">SYSTEM LOG</div>
            <div class="log-list" id="log-console">
                <div class="log-item">> System initialized...</div>
                <div class="log-item">> Waiting for input stream...</div>
            </div>
        </div>
    </main>

    <footer>
        <button class="btn btn-normal" onclick="playerDecision('normal')">âœ… ì •ìƒ ì„¸í¬</button>
        <button class="btn btn-virus" onclick="playerDecision('virus')">âš ï¸ ë°”ì´ëŸ¬ìŠ¤ ê°ì—¼</button>
    </footer>

    <div class="overlay" id="start-overlay">
        <h1>ì„¸í¬ ë¶„ì„ ì±Œë¦°ì§€</h1>
        <p>
            ë‹¹ì‹ ì€ ì˜ë£Œ AI ì—°êµ¬ì›ì…ë‹ˆë‹¤.<br>
            í˜„ë¯¸ê²½ìœ¼ë¡œ ë³´ì´ëŠ” ì„¸í¬ì˜ <b>[ëª¨ì–‘, ìƒ‰ê¹”, ì›€ì§ì„]</b>ì„ ë¶„ì„í•˜ì—¬<br>
            AIì—ê²Œ <b>ì •ìƒ</b>ì¸ì§€ <b>ë°”ì´ëŸ¬ìŠ¤</b>ì¸ì§€ ê°€ë¥´ì³ì£¼ì„¸ìš”(Labeling).<br><br>
            ë°ì´í„°ê°€ ìŒ“ì¼ìˆ˜ë¡ AIì˜ ì§„ë‹¨ ì •í™•ë„ê°€ ì˜¬ë¼ê°‘ë‹ˆë‹¤!
        </p>
        <button class="start-btn" onclick="startGame()">ì—°êµ¬ ì‹œì‘</button>
    </div>
</div>

<script>
    /* --- ê²Œì„ ë°ì´í„° ë° ë³€ìˆ˜ --- */
    let level = 1;
    let score = 0; // í•™ìŠµì‹œí‚¨ ë°ì´í„° ìˆ˜
    let correctCount = 0; // ë§ì¶˜ íšŸìˆ˜
    let currentCellType = ''; // 'normal' or 'virus'
    
    // AI ìƒíƒœ (ì´ˆê¸°ì—” ë©ì²­í•¨)
    let aiAccuracy = 50; // ì´ˆê¸° AI ì •í™•ë„ 50%
    
    // ì‹œë‚˜ë¦¬ì˜¤ ë°ì´í„°
    // Normal: ë‘¥ê·¼ ëª¨ì–‘, íŒŒë€ìƒ‰/ì²­ë¡ìƒ‰, ëŠë¦¼
    // Virus: ë¾°ì¡±/ë¶ˆê·œì¹™, ë¹¨ê°„ìƒ‰/ë³´ë¼ìƒ‰, ë¹ ë¦„/ë–¨ë¦¼
    
    function startGame() {
        document.getElementById('start-overlay').style.display = 'none';
        addLog("Training Session Started.");
        spawnCell();
    }

    function spawnCell() {
        const container = document.getElementById('cell-container');
        container.innerHTML = ''; // ì´ˆê¸°í™”

        // 1. ì„¸í¬ íƒ€ì… ê²°ì • (50:50)
        currentCellType = Math.random() < 0.5 ? 'normal' : 'virus';

        // 2. ì‹œê°ì  ìƒì„±
        const cell = document.createElement('div');
        cell.classList.add('cell');
        cell.classList.add(currentCellType);
        
        const core = document.createElement('div');
        core.classList.add('cell-core');
        cell.appendChild(core);
        
        container.appendChild(cell);

        // 3. AI ë¶„ì„ ì‹œë®¬ë ˆì´ì…˜ (íŠ¹ì§• ì¶”ì¶œ)
        simulateAIAnalysis(currentCellType);
    }

    function simulateAIAnalysis(type) {
        // UI ì´ˆê¸°í™”
        document.getElementById('feat-shape').innerText = "SCANNING...";
        document.getElementById('feat-color').innerText = "SCANNING...";
        document.getElementById('feat-move').innerText = "SCANNING...";
        document.getElementById('ai-result-text').innerText = "ANALYZING...";
        document.getElementById('conf-bar-fill').style.width = '0%';
        
        setTimeout(() => {
            // íŠ¹ì§• ì¶”ì¶œ ê²°ê³¼ í‘œì‹œ
            if (type === 'normal') {
                document.getElementById('feat-shape').innerText = "ROUND (ì›í˜•)";
                document.getElementById('feat-shape').style.color = "#38bdf8";
                document.getElementById('feat-color').innerText = "BLUE/CYAN";
                document.getElementById('feat-move').innerText = "STABLE (ì•ˆì •)";
            } else {
                document.getElementById('feat-shape').innerText = "IRREGULAR (ë¶ˆê·œì¹™)";
                document.getElementById('feat-shape').style.color = "#ef4444";
                document.getElementById('feat-color').innerText = "RED/PURPLE";
                document.getElementById('feat-move').innerText = "UNSTABLE (ë¶ˆì•ˆì •)";
            }
            
            // AI ì˜ˆì¸¡ (í˜„ì¬ AI ì •í™•ë„ì— ë”°ë¼ ì •ë‹µ í˜¹ì€ ì˜¤ë‹µ ì˜ˆì¸¡)
            // Math.random() * 100 ì´ aiAccuracyë³´ë‹¤ ë‚®ìœ¼ë©´ ì •ë‹µì„ ë§í˜.
            const isAiCorrect = (Math.random() * 100) < aiAccuracy;
            
            let aiGuess = '';
            let confidence = 0;

            if (isAiCorrect) {
                aiGuess = type === 'normal' ? 'NORMAL CELL' : 'VIRUS DETECTED';
                confidence = Math.floor(Math.random() * 20) + 80; // 80~99% í™•ì‹ 
            } else {
                // í‹€ë¦° ì˜ˆì¸¡
                aiGuess = type === 'normal' ? 'VIRUS DETECTED' : 'NORMAL CELL';
                confidence = Math.floor(Math.random() * 30) + 40; // 40~69% (ì• ë§¤í•¨)
            }

            // ê²°ê³¼ ì¶œë ¥
            const resText = document.getElementById('ai-result-text');
            resText.innerText = aiGuess;
            resText.style.color = aiGuess.includes('VIRUS') ? 'var(--danger)' : 'var(--primary)';
            
            document.getElementById('conf-val').innerText = confidence;
            const bar = document.getElementById('conf-bar-fill');
            bar.style.width = confidence + '%';
            bar.style.background = confidence > 80 ? 'var(--accent)' : '#fbbf24'; // ë†’ìœ¼ë©´ ì²­ë¡, ë‚®ìœ¼ë©´ ë…¸ë‘

            addLog(`> AI Prediction: ${aiGuess} (${confidence}%)`);

        }, 800); // 0.8ì´ˆ ë”œë ˆì´
    }

    function playerDecision(choice) {
        // choice: 'normal' or 'virus'
        // currentCellType: 'normal' or 'virus'
        
        let msg = "";
        
        if (choice === currentCellType) {
            // ì •ë‹µ (ë¼ë²¨ë§ ì„±ê³µ)
            score++;
            correctCount++;
            msg = "CORRECT LABELING. DATABASE UPDATED.";
            addLog(`> [SUCCESS] ${msg}`);
            
            // AI ì •í™•ë„ ìƒìŠ¹ (ìµœëŒ€ 98%ê¹Œì§€)
            if(aiAccuracy < 98) aiAccuracy += 2;

        } else {
            // ì˜¤ë‹µ
            msg = "INCORRECT LABELING. REVIEW DATA.";
            addLog(`> [ERROR] ${msg}`, true);
            
            // íŒ¨ë„í‹° (ì •í™•ë„ ì†Œí­ í•˜ë½)
            if(aiAccuracy > 30) aiAccuracy -= 5;
        }

        updateDashboard();
        spawnCell(); // ë‹¤ìŒ ë¬¸ì œ
    }

    function updateDashboard() {
        // ì ìˆ˜ ê°±ì‹ 
        document.getElementById('score').innerText = score;
        
        // ì „ì²´ ì •í™•ë„ ê³„ì‚° (í”Œë ˆì´ì–´ì˜ ì •í™•ë„)
        const totalAcc = score === 0 ? 0 : Math.round((correctCount / (score + (score-correctCount))) * 100); 
        // ì—¬ê¸°ì„œëŠ” ê°„ë‹¨íˆ 'AI ì„±ëŠ¥'ì„ í‘œì‹œí•˜ëŠ” ê²ƒìœ¼ë¡œ ì—°ì¶œ
        document.getElementById('accuracy').innerText = Math.floor(aiAccuracy);

        // ë ˆë²¨ì—… ë¡œì§
        if (score > level * 10) {
            level++;
            document.getElementById('level').innerText = level;
            addLog(`>> SYSTEM UPGRADE: LEVEL ${level}`);
            alert(`ğŸ‰ ë ˆë²¨ ì—…! AI ì„±ëŠ¥ì´ í–¥ìƒë˜ì—ˆìŠµë‹ˆë‹¤. (Lv.${level})`);
        }
    }

    function addLog(text, isError = false) {
        const consoleEl = document.getElementById('log-console');
        const div = document.createElement('div');
        div.classList.add('log-item');
        div.innerText = text;
        if (isError) div.style.color = '#ef4444';
        
        consoleEl.prepend(div); // ìµœì‹  ë¡œê·¸ê°€ ìœ„ë¡œ
        
        // ë¡œê·¸ ê°¯ìˆ˜ ì œí•œ
        if (consoleEl.children.length > 20) {
            consoleEl.removeChild(consoleEl.lastChild);
        }
    }
</script>

</body>
</html>
