<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Classroom Flash Word</title>
    <link href="https://fonts.googleapis.com/css2?family=Jua&family=Noto+Sans+KR:wght@500;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-board: #2F4F4F; /* ì¹ íŒìƒ‰ */
            --frame-wood: #8B4513;
            --text-chalk: #FFFFFF;
            --accent-yellow: #FFD700;
            --accent-blue: #87CEEB;
            --btn-bg: rgba(255, 255, 255, 0.2);
            --btn-hover: rgba(255, 255, 255, 0.4);
        }

        * { box-sizing: border-box; user-select: none; }

        body {
            margin: 0;
            padding: 0;
            font-family: 'Jua', sans-serif;
            background-color: var(--bg-board);
            color: var(--text-chalk);
            height: 100vh;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        /* --- 1. ì„¤ì • í™”ë©´ (Setup Screen) --- */
        #setup-screen {
            background: white;
            color: #333;
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            width: 80%;
            max-width: 600px;
            text-align: center;
            z-index: 100;
        }

        h1 { margin-top: 0; color: var(--bg-board); font-size: 2.5rem; }
        
        .input-area { width: 100%; margin-bottom: 20px; }
        textarea {
            width: 100%;
            height: 200px;
            padding: 15px;
            border: 2px solid #ccc;
            border-radius: 10px;
            font-size: 1.2rem;
            font-family: 'Noto Sans KR', sans-serif;
            resize: none;
        }

        .control-group { margin: 20px 0; display: flex; align-items: center; justify-content: center; gap: 10px; }
        input[type="range"] { width: 200px; cursor: pointer; }

        .btn-start {
            background-color: var(--bg-board);
            color: white;
            font-size: 1.5rem;
            padding: 15px 40px;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: transform 0.2s;
        }
        .btn-start:hover { transform: scale(1.05); background-color: #1a2e2e; }

        /* --- 2. í•™ìŠµ í™”ë©´ (Learning Screen) --- */
        #learning-screen {
            display: none; /* ì´ˆê¸°ì—” ìˆ¨ê¹€ */
            flex-direction: column;
            width: 100%;
            height: 100%;
            position: relative;
        }

        /* ìƒë‹¨ ëª¨ë“œ íƒ­ */
        header {
            display: flex;
            justify-content: center;
            padding: 20px;
            gap: 15px;
            background: rgba(0,0,0,0.2);
        }

        .mode-btn {
            background: var(--btn-bg);
            border: 2px solid transparent;
            color: #ccc;
            padding: 10px 20px;
            border-radius: 30px;
            font-size: 1.2rem;
            cursor: pointer;
            font-family: 'Jua', sans-serif;
            transition: 0.3s;
        }
        .mode-btn.active {
            background: var(--accent-yellow);
            color: var(--bg-board);
            font-weight: bold;
            box-shadow: 0 0 15px var(--accent-yellow);
        }

        /* ì¤‘ì•™ ë‹¨ì–´ í‘œì‹œ ì˜ì—­ */
        #flash-card {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 20px;
            position: relative;
        }

        .guide-text {
            position: absolute;
            top: 20px;
            font-size: 1.5rem;
            color: var(--accent-blue);
            opacity: 0.8;
        }

        .word-text {
            font-family: 'Noto Sans KR', sans-serif;
            font-weight: 900;
            line-height: 1.2;
        }

        /* ëª¨ë“œë³„ í…ìŠ¤íŠ¸ ìŠ¤íƒ€ì¼ */
        .text-en { font-size: 8rem; color: #fff; }
        .text-ko { font-size: 5rem; color: var(--accent-yellow); margin-top: 20px; }
        
        /* ë‹¨ì¼ í‘œì‹œ ëª¨ë“œì¼ ë•Œ */
        .text-solo { font-size: 9rem; color: #fff; }

        /* ì• ë‹ˆë©”ì´ì…˜ íš¨ê³¼ */
        .animate-pop { animation: popIn 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        @keyframes popIn {
            0% { transform: scale(0.8); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }

        /* í•˜ë‹¨ ì»¨íŠ¸ë¡¤ ë°” */
        footer {
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            gap: 20px;
            background: rgba(0,0,0,0.2);
        }

        .control-btn {
            background: var(--btn-bg);
            border: 2px solid white;
            color: white;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            font-size: 1.5rem;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .control-btn:hover { background: var(--btn-hover); }
        .btn-home { font-size: 1rem; border-radius: 15px; width: auto; padding: 0 20px; }

        /* í”„ë¡œê·¸ë ˆìŠ¤ ë°” */
        #progress-bar {
            position: absolute;
            bottom: 100px;
            left: 10%;
            width: 80%;
            height: 6px;
            background: rgba(255,255,255,0.2);
            border-radius: 3px;
        }
        #progress-fill {
            height: 100%;
            background: var(--accent-yellow);
            width: 0%;
            transition: width 0.3s;
            border-radius: 3px;
        }

    </style>
</head>
<body>

    <div id="setup-screen">
        <h1>ğŸ“ ì˜ì–´ ë‹¨ì–´ ê¹œë¹¡ì´</h1>
        <div class="input-area">
            <textarea id="word-input" placeholder="ì—¬ê¸°ì— ë‹¨ì–´ì™€ ëœ»ì„ ì…ë ¥í•˜ì„¸ìš”.&#13;&#10;ì˜ˆì‹œ:&#13;&#10;apple, ì‚¬ê³¼&#13;&#10;banana, ë°”ë‚˜ë‚˜&#13;&#10;school, í•™êµ">apple, ì‚¬ê³¼&#13;&#10;banana, ë°”ë‚˜ë‚˜&#13;&#10;teacher, ì„ ìƒë‹˜&#13;&#10;student, í•™ìƒ&#13;&#10;friend, ì¹œêµ¬&#13;&#10;happy, í–‰ë³µí•œ&#13;&#10;run, ë‹¬ë¦¬ë‹¤&#13;&#10;book, ì±…&#13;&#10;pencil, ì—°í•„&#13;&#10;computer, ì»´í“¨í„°</textarea>
        </div>
        <div class="control-group">
            <label>ë„˜ê¹€ ì†ë„: <span id="speed-val">3.0</span>ì´ˆ</label>
            <input type="range" id="speed-slider" min="1" max="5" step="0.5" value="3" oninput="updateSpeedVal(this.value)">
        </div>
        <button class="btn-start" onclick="startLearning()">í•™ìŠµ ì‹œì‘ â–¶</button>
    </div>

    <div id="learning-screen">
        <header>
            <button class="mode-btn active" onclick="setMode(1)">1. ë‹¨ì–´ í•™ìŠµ</button>
            <button class="mode-btn" onclick="setMode(2)">2. ëœ» ë§í•˜ê¸°</button>
            <button class="mode-btn" onclick="setMode(3)">3. ì˜ì–´ ë§í•˜ê¸°</button>
            <button class="mode-btn" onclick="setMode(4)">4. ëœë¤ ê²Œì„</button>
        </header>

        <div id="flash-card">
            <div class="guide-text" id="guide-text"></div>
            <div id="content-area"></div>
        </div>

        <div id="progress-bar"><div id="progress-fill"></div></div>

        <footer>
            <button class="control-btn" onclick="prevCard()">â—€</button>
            <button class="control-btn" id="btn-pause" onclick="togglePlay()">âšâš</button>
            <button class="control-btn" onclick="nextCard()">â–¶</button>
            <button class="control-btn btn-home" onclick="goHome()">ğŸ  í™ˆìœ¼ë¡œ</button>
        </footer>
    </div>

    <script>
        // --- ë³€ìˆ˜ ì„¤ì • ---
        let words = []; // ë‹¨ì–´ ë¦¬ìŠ¤íŠ¸ {en: "", ko: ""}
        let currentIndex = 0;
        let timer = null;
        let isPlaying = false;
        let currentMode = 1; // 1:ê¸°ë³¸, 2:ëœ»ë§í•˜ê¸°, 3:ì˜ì–´ë§í•˜ê¸°, 4:ëœë¤
        let intervalTime = 3000; // ê¸°ë³¸ 3ì´ˆ

        // --- ì´ˆê¸° ì„¤ì • ê¸°ëŠ¥ ---
        function updateSpeedVal(val) {
            document.getElementById('speed-val').innerText = parseFloat(val).toFixed(1);
            intervalTime = val * 1000;
        }

        function startLearning() {
            const input = document.getElementById('word-input').value;
            if (!input.trim()) {
                alert("ë‹¨ì–´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”!");
                return;
            }
            
            // í…ìŠ¤íŠ¸ íŒŒì‹± (ì½¤ë§ˆ ë˜ëŠ” íƒ­ìœ¼ë¡œ êµ¬ë¶„)
            const lines = input.split('\n');
            words = [];
            lines.forEach(line => {
                if(line.trim().length > 0) {
                    // ì½¤ë§ˆ(,) í˜¹ì€ ìŠ¬ë˜ì‹œ(/) ë“±ìœ¼ë¡œ êµ¬ë¶„
                    let parts = line.split(/,|ï¼Œ|\//); 
                    if(parts.length >= 2) {
                        words.push({
                            en: parts[0].trim(),
                            ko: parts[1].trim()
                        });
                    }
                }
            });

            if (words.length === 0) {
                alert("ì˜¬ë°”ë¥¸ í˜•ì‹ìœ¼ë¡œ ì…ë ¥í•´ì£¼ì„¸ìš”.\n(ì˜ˆ: apple, ì‚¬ê³¼)");
                return;
            }

            // í™”ë©´ ì „í™˜
            document.getElementById('setup-screen').style.display = 'none';
            document.getElementById('learning-screen').style.display = 'flex';
            
            // ì´ˆê¸°í™” ë° ì‹œì‘
            currentIndex = 0;
            isPlaying = true;
            setMode(1); // ê¸°ë³¸ ëª¨ë“œë¡œ ì‹œì‘
        }

        function goHome() {
            stopTimer();
            document.getElementById('learning-screen').style.display = 'none';
            document.getElementById('setup-screen').style.display = 'block';
        }

        // --- í•™ìŠµ ê¸°ëŠ¥ ---
        function setMode(mode) {
            currentMode = mode;
            
            // íƒ­ ìŠ¤íƒ€ì¼ ë³€ê²½
            document.querySelectorAll('.mode-btn').forEach((btn, idx) => {
                if (idx + 1 === mode) btn.classList.add('active');
                else btn.classList.remove('active');
            });

            // ëª¨ë“œë³„ ì•ˆë‚´ ë©˜íŠ¸ ë° ì‹œê°„ ì„¤ì •
            const guide = document.getElementById('guide-text');
            
            // ëª¨ë“œ 4ëŠ” ìŠ¤í”¼ë“œ ê²Œì„ì´ë¯€ë¡œ ì„¤ì •ëœ ì‹œê°„ë³´ë‹¤ ì¡°ê¸ˆ ë¹ ë¥´ê²Œ (ìµœì†Œ 1ì´ˆ ë³´ì¥)
            let tempInterval = intervalTime;
            
            if (mode === 1) {
                guide.innerText = "í° ì†Œë¦¬ë¡œ ë”°ë¼ ì½ìœ¼ì„¸ìš”!";
            } else if (mode === 2) {
                guide.innerText = "ì•Œë§ì€ ëœ»ì„ ë§í•´ë³´ì„¸ìš”!";
            } else if (mode === 3) {
                guide.innerText = "ì•Œë§ì€ ì˜ì–´ë¥¼ ë§í•´ë³´ì„¸ìš”!";
            } else if (mode === 4) {
                guide.innerText = "ëœë¤ ìŠ¤í”¼ë“œ ê²Œì„!";
                tempInterval = Math.max(1000, intervalTime * 0.7); // 30% ë¹ ë¥´ê²Œ
            }

            // íƒ€ì´ë¨¸ ì¬ì„¤ì •
            if (isPlaying) {
                stopTimer();
                startTimer(tempInterval);
            }
            
            showCard();
        }

        function showCard() {
            const container = document.getElementById('content-area');
            const word = words[currentIndex];
            
            // ì• ë‹ˆë©”ì´ì…˜ ì¬ì‹¤í–‰ì„ ìœ„í•œ ë¦¬í”Œë¡œìš°
            container.classList.remove('animate-pop');
            void container.offsetWidth; 
            container.classList.add('animate-pop');

            let html = '';

            if (currentMode === 1) {
                // ë‹¨ì–´ í•™ìŠµ (ìœ„: ì˜ì–´, ì•„ë˜: í•œê¸€)
                html = `<div class="word-text text-en">${word.en}</div>
                        <div class="word-text text-ko">${word.ko}</div>`;
            } else if (currentMode === 2) {
                // ëœ» ë§í•˜ê¸° (ì˜ì–´ë§Œ)
                html = `<div class="word-text text-solo" style="color:#fff;">${word.en}</div>`;
            } else if (currentMode === 3) {
                // ì˜ì–´ ë§í•˜ê¸° (í•œê¸€ë§Œ)
                html = `<div class="word-text text-solo" style="color:var(--accent-yellow);">${word.ko}</div>`;
            } else if (currentMode === 4) {
                // ëœë¤ (50% í™•ë¥ )
                if (Math.random() < 0.5) {
                    html = `<div class="word-text text-solo" style="color:#fff;">${word.en}</div>`;
                } else {
                    html = `<div class="word-text text-solo" style="color:var(--accent-yellow);">${word.ko}</div>`;
                }
            }

            container.innerHTML = html;
            updateProgress();
        }

        function updateProgress() {
            const percent = ((currentIndex + 1) / words.length) * 100;
            document.getElementById('progress-fill').style.width = percent + '%';
        }

        // --- ì»¨íŠ¸ë¡¤ëŸ¬ ---
        function nextCard() {
            currentIndex++;
            if (currentIndex >= words.length) {
                currentIndex = 0; // ë¬´í•œ ë°˜ë³µ
            }
            showCard();
            resetTimer(); // ìˆ˜ë™ ì¡°ì‘ ì‹œ íƒ€ì´ë¨¸ ì´ˆê¸°í™”
        }

        function prevCard() {
            currentIndex--;
            if (currentIndex < 0) {
                currentIndex = words.length - 1;
            }
            showCard();
            resetTimer();
        }

        function togglePlay() {
            const btn = document.getElementById('btn-pause');
            if (isPlaying) {
                stopTimer();
                isPlaying = false;
                btn.innerText = "â–¶";
            } else {
                let time = currentMode === 4 ? Math.max(1000, intervalTime * 0.7) : intervalTime;
                startTimer(time);
                isPlaying = true;
                btn.innerText = "âšâš";
            }
        }

        // --- íƒ€ì´ë¨¸ ë¡œì§ ---
        function startTimer(ms) {
            timer = setInterval(() => {
                nextCard();
            }, ms);
        }

        function stopTimer() {
            clearInterval(timer);
        }

        function resetTimer() {
            if (isPlaying) {
                stopTimer();
                let time = currentMode === 4 ? Math.max(1000, intervalTime * 0.7) : intervalTime;
                startTimer(time);
            }
        }

    </script>
</body>
</html>
