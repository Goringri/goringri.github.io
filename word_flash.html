<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Classroom Flash Word V2</title>
    <link href="https://fonts.googleapis.com/css2?family=Jua&family=Noto+Sans+KR:wght@500;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-board: #2F4F4F; /* ì¹ íŒìƒ‰ */
            --text-chalk: #FFFFFF;
            --accent-yellow: #FFD700;
            --accent-blue: #87CEEB;
            --btn-bg: rgba(255, 255, 255, 0.2);
            --btn-hover: rgba(255, 255, 255, 0.4);
            --input-border: #ddd;
        }

        * { box-sizing: border-box; user-select: none; }

        body {
            margin: 0; padding: 0;
            font-family: 'Jua', sans-serif;
            background-color: var(--bg-board);
            color: var(--text-chalk);
            height: 100vh;
            overflow: hidden;
            display: flex; justify-content: center; align-items: center;
        }

        /* --- 1. ì„¤ì • í™”ë©´ (Setup Screen) --- */
        #setup-screen {
            background: white; color: #333;
            padding: 30px; border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            width: 90%; max-width: 800px; height: 90vh;
            text-align: center; z-index: 100;
            display: flex; flex-direction: column;
        }

        h1 { margin: 0 0 15px 0; color: var(--bg-board); font-size: 2rem; }

        /* ì…ë ¥ ë¦¬ìŠ¤íŠ¸ ì˜ì—­ (ìŠ¤í¬ë¡¤ ê°€ëŠ¥) */
        .input-list-container {
            flex: 1;
            overflow-y: auto;
            border: 1px solid #eee;
            border-radius: 10px;
            padding: 10px;
            margin-bottom: 15px;
            background: #f9f9f9;
        }

        .input-row {
            display: flex; align-items: center; gap: 10px; margin-bottom: 10px;
        }
        .row-num {
            width: 30px; font-weight: bold; color: #777; font-size: 1.2rem;
        }
        .input-box {
            flex: 1; padding: 12px; border: 1px solid var(--input-border);
            border-radius: 8px; font-size: 1.1rem; font-family: 'Noto Sans KR';
        }
        .input-box:focus { outline: none; border-color: #2F4F4F; background: #eeffee; }

        /* í•˜ë‹¨ ì»¨íŠ¸ë¡¤ */
        .control-group { margin-bottom: 15px; display: flex; align-items: center; justify-content: center; gap: 15px; font-size: 1.2rem; }
        input[type="range"] { width: 150px; cursor: pointer; }

        .btn-start {
            background-color: var(--bg-board); color: white;
            font-size: 1.5rem; padding: 12px 50px; border: none;
            border-radius: 50px; cursor: pointer; transition: 0.2s;
            box-shadow: 0 5px 10px rgba(0,0,0,0.2);
        }
        .btn-start:hover { transform: scale(1.05); background-color: #1a2e2e; }

        /* --- 2. í•™ìŠµ í™”ë©´ (Learning Screen) --- */
        #learning-screen {
            display: none; flex-direction: column;
            width: 100%; height: 100%; position: relative;
        }

        header {
            display: flex; justify-content: center; padding: 20px; gap: 15px;
            background: rgba(0,0,0,0.2);
        }

        .mode-btn {
            background: var(--btn-bg); border: 2px solid transparent;
            color: #ccc; padding: 10px 20px; border-radius: 30px;
            font-size: 1.2rem; cursor: pointer; font-family: 'Jua'; transition: 0.3s;
        }
        .mode-btn.active {
            background: var(--accent-yellow); color: var(--bg-board);
            font-weight: bold; box-shadow: 0 0 15px var(--accent-yellow);
        }

        #flash-card {
            flex: 1; display: flex; flex-direction: column;
            justify-content: center; align-items: center;
            text-align: center; padding: 20px; position: relative;
        }

        .guide-text {
            position: absolute; top: 20px; font-size: 1.5rem;
            color: var(--accent-blue); opacity: 0.8;
        }

        .word-text {
            font-family: 'Noto Sans KR', sans-serif; font-weight: 900; line-height: 1.2;
        }
        .text-en { font-size: 8rem; color: #fff; }
        .text-ko { font-size: 5rem; color: var(--accent-yellow); margin-top: 20px; }
        .text-solo { font-size: 9rem; color: #fff; }

        .animate-pop { animation: popIn 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        @keyframes popIn { 0% { transform: scale(0.8); opacity: 0; } 100% { transform: scale(1); opacity: 1; } }

        footer {
            display: flex; justify-content: center; align-items: center;
            padding: 20px; gap: 20px; background: rgba(0,0,0,0.2);
        }

        .control-btn {
            background: var(--btn-bg); border: 2px solid white; color: white;
            width: 60px; height: 60px; border-radius: 50%;
            font-size: 1.5rem; cursor: pointer; display: flex;
            justify-content: center; align-items: center;
        }
        .control-btn:hover { background: var(--btn-hover); }
        .btn-home { font-size: 1rem; border-radius: 15px; width: auto; padding: 0 20px; }

        #progress-bar {
            position: absolute; bottom: 100px; left: 10%;
            width: 80%; height: 6px; background: rgba(255,255,255,0.2); border-radius: 3px;
        }
        #progress-fill {
            height: 100%; background: var(--accent-yellow); width: 0%;
            transition: width 0.3s; border-radius: 3px;
        }
    </style>
</head>
<body>

    <div id="setup-screen">
        <h1>ğŸ“ ì˜ì–´ ë‹¨ì–´ ê¹œë¹¡ì´ ì„¤ì •</h1>
        
        <div class="input-list-container" id="input-container">
            </div>

        <div class="control-group">
            <label>â±ï¸ ë„˜ê¹€ ì†ë„: <span id="speed-val">3.0</span>ì´ˆ</label>
            <input type="range" id="speed-slider" min="1" max="5" step="0.5" value="3" oninput="updateSpeedVal(this.value)">
        </div>
        <button class="btn-start" onclick="startLearning()">í•™ìŠµ ì‹œì‘ â–¶</button>
    </div>

    <div id="learning-screen">
        <header>
            <button class="mode-btn active" onclick="setMode(1)">1. ë‹¨ì–´ í•™ìŠµ</button>
            <button class="mode-btn" onclick="setMode(2)">2. ëœ» ë§í•˜ê¸°</button>
            <button class="mode-btn" onclick="setMode(3)">3. ì˜ì–´ ë§í•˜ê¸°</button>
            <button class="mode-btn" onclick="setMode(4)">4. ëœë¤ ê²Œì„</button>
        </header>

        <div id="flash-card">
            <div class="guide-text" id="guide-text"></div>
            <div id="content-area"></div>
        </div>

        <div id="progress-bar"><div id="progress-fill"></div></div>

        <footer>
            <button class="control-btn" onclick="prevCard()">â—€</button>
            <button class="control-btn" id="btn-pause" onclick="togglePlay()">âšâš</button>
            <button class="control-btn" onclick="nextCard()">â–¶</button>
            <button class="control-btn btn-home" onclick="goHome()">ğŸ  ì„¤ì •</button>
        </footer>
    </div>

    <script>
        // --- ì´ˆê¸°í™”: ì…ë ¥ì¹¸ 10ê°œ ìƒì„± ---
        const inputContainer = document.getElementById('input-container');
        for (let i = 1; i <= 10; i++) {
            const row = document.createElement('div');
            row.className = 'input-row';
            row.innerHTML = `
                <div class="row-num">${i}</div>
                <input type="text" class="input-box word-en" placeholder="ì˜ì–´ ë‹¨ì–´ (ì˜ˆ: apple)">
                <input type="text" class="input-box word-ko" placeholder="í•œê¸€ ëœ» (ì˜ˆ: ì‚¬ê³¼)">
            `;
            inputContainer.appendChild(row);
        }

        // --- ë³€ìˆ˜ ì„¤ì • ---
        let words = []; 
        let currentIndex = 0;
        let timer = null;
        let isPlaying = false;
        let currentMode = 1; 
        let intervalTime = 3000; 

        function updateSpeedVal(val) {
            document.getElementById('speed-val').innerText = parseFloat(val).toFixed(1);
            intervalTime = val * 1000;
        }

        // --- í•™ìŠµ ì‹œì‘ (ìœ íš¨ì„± ê²€ì‚¬ í¬í•¨) ---
        function startLearning() {
            const enInputs = document.querySelectorAll('.word-en');
            const koInputs = document.querySelectorAll('.word-ko');
            
            let tempWords = [];
            let isEmptyError = false; // í•˜ë‚˜ë§Œ ì…ë ¥ëœ ê²½ìš° ì²´í¬

            for (let i = 0; i < 10; i++) {
                const en = enInputs[i].value.trim();
                const ko = koInputs[i].value.trim();

                // ë‘˜ ë‹¤ ë¹„ì–´ìˆìœ¼ë©´ íŒ¨ìŠ¤ (ë¬¸ì œ ì—†ìŒ)
                if (en === "" && ko === "") continue;

                // ë‘˜ ì¤‘ í•˜ë‚˜ë§Œ ì…ë ¥ëœ ê²½ìš° -> ì—ëŸ¬
                if (en === "" || ko === "") {
                    isEmptyError = true;
                    // í•´ë‹¹ ì…ë ¥ì¹¸ ê°•ì¡° (ë¹¨ê°„ í…Œë‘ë¦¬)
                    if(en === "") enInputs[i].style.borderColor = "red";
                    if(ko === "") koInputs[i].style.borderColor = "red";
                } else {
                    // ë‘˜ ë‹¤ ì…ë ¥ëœ ê²½ìš° -> ë¦¬ìŠ¤íŠ¸ì— ì¶”ê°€
                    tempWords.push({ en: en, ko: ko });
                    // í…Œë‘ë¦¬ ì´ˆê¸°í™”
                    enInputs[i].style.borderColor = "#ddd";
                    koInputs[i].style.borderColor = "#ddd";
                }
            }

            // ì—ëŸ¬ ì²´í¬
            if (isEmptyError) {
                alert("ì˜ì–´ ë‹¨ì–´ì™€ ëœ»ì„ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”!");
                return;
            }

            if (tempWords.length === 0) {
                alert("ë‹¨ì–´ë¥¼ ì ì–´ë„ í•˜ë‚˜ëŠ” ì…ë ¥í•´ì•¼ í•©ë‹ˆë‹¤.");
                return;
            }

            // í•™ìŠµ ë°ì´í„° ì €ì¥
            words = tempWords;

            // í™”ë©´ ì „í™˜
            document.getElementById('setup-screen').style.display = 'none';
            document.getElementById('learning-screen').style.display = 'flex';
            
            currentIndex = 0;
            isPlaying = true;
            setMode(1); 
        }

        function goHome() {
            stopTimer();
            document.getElementById('learning-screen').style.display = 'none';
            document.getElementById('setup-screen').style.display = 'flex';
        }

        // --- í•™ìŠµ ê¸°ëŠ¥ (ì´ì „ê³¼ ë™ì¼) ---
        function setMode(mode) {
            currentMode = mode;
            document.querySelectorAll('.mode-btn').forEach((btn, idx) => {
                if (idx + 1 === mode) btn.classList.add('active');
                else btn.classList.remove('active');
            });

            const guide = document.getElementById('guide-text');
            let tempInterval = intervalTime;
            
            if (mode === 1) guide.innerText = "í° ì†Œë¦¬ë¡œ ë”°ë¼ ì½ìœ¼ì„¸ìš”!";
            else if (mode === 2) guide.innerText = "ì•Œë§ì€ ëœ»ì„ ë§í•´ë³´ì„¸ìš”!";
            else if (mode === 3) guide.innerText = "ì•Œë§ì€ ì˜ì–´ë¥¼ ë§í•´ë³´ì„¸ìš”!";
            else if (mode === 4) {
                guide.innerText = "ëœë¤ ìŠ¤í”¼ë“œ ê²Œì„!";
                tempInterval = Math.max(1000, intervalTime * 0.7);
            }

            if (isPlaying) {
                stopTimer();
                startTimer(tempInterval);
            }
            showCard();
        }

        function showCard() {
            const container = document.getElementById('content-area');
            const word = words[currentIndex];
            
            container.classList.remove('animate-pop');
            void container.offsetWidth; 
            container.classList.add('animate-pop');

            let html = '';
            if (currentMode === 1) {
                html = `<div class="word-text text-en">${word.en}</div>
                        <div class="word-text text-ko">${word.ko}</div>`;
            } else if (currentMode === 2) {
                html = `<div class="word-text text-solo" style="color:#fff;">${word.en}</div>`;
            } else if (currentMode === 3) {
                html = `<div class="word-text text-solo" style="color:var(--accent-yellow);">${word.ko}</div>`;
            } else if (currentMode === 4) {
                if (Math.random() < 0.5) html = `<div class="word-text text-solo" style="color:#fff;">${word.en}</div>`;
                else html = `<div class="word-text text-solo" style="color:var(--accent-yellow);">${word.ko}</div>`;
            }
            container.innerHTML = html;
            updateProgress();
        }

        function updateProgress() {
            const percent = ((currentIndex + 1) / words.length) * 100;
            document.getElementById('progress-fill').style.width = percent + '%';
        }

        function nextCard() {
            currentIndex++;
            if (currentIndex >= words.length) currentIndex = 0;
            showCard();
            resetTimer();
        }

        function prevCard() {
            currentIndex--;
            if (currentIndex < 0) currentIndex = words.length - 1;
            showCard();
            resetTimer();
        }

        function togglePlay() {
            const btn = document.getElementById('btn-pause');
            if (isPlaying) {
                stopTimer();
                isPlaying = false;
                btn.innerText = "â–¶";
            } else {
                let time = currentMode === 4 ? Math.max(1000, intervalTime * 0.7) : intervalTime;
                startTimer(time);
                isPlaying = true;
                btn.innerText = "âšâš";
            }
        }

        function startTimer(ms) {
            timer = setInterval(() => { nextCard(); }, ms);
        }

        function stopTimer() { clearInterval(timer); }

        function resetTimer() {
            if (isPlaying) {
                stopTimer();
                let time = currentMode === 4 ? Math.max(1000, intervalTime * 0.7) : intervalTime;
                startTimer(time);
            }
        }
    </script>
</body>
</html>
